<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>ファイナルリーダー</title>
    <link rel="shortcut icon" type="image/png" href="サイトアイコン.PNG">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="style.css" />
    <script src="finalvoice.js"></script>
    <script src="finalajax.js"></script>
    <script src="finalreader.js"></script>
    <script>var globalFullJsonData = null;</script>
  </head>
  <body>
    <div id="wrapper" style="background-image:url('ノーヴァ背景.JPG');">
    <div id="conteiner">
      <div id="content_area"></div>
    <!-- フッター -->
    <br/><br/>
    <div id="footer">
      <p>created by ほげん(hogen_feh@twitter.com)</p>
      <p><a href="https://game.bilibili.co.jp/finalgear/">©ファイナルギア</a>　　<a href="https://game.bilibili.co.jp/">©bilibili</a></p>
    </div>
    <script>
      var content_area = document.getElementById("content_area");
      class MyFinalAjax extends FinalAjax{
        onLoadPage(loadData, params){
          super.onLoadPage(loadData, params);
        }
        loadStoryJson(fileName){
          this.ajaxLoad(fileName,null,'onLoadStoryJson',null)
        }
        onLoadStoryJson(data,param){
          globalFullJsonData = data;
          this.loadPage('ストーリー読む.html');
        }
      };
      var ajaxLoader = new MyFinalAjax(content_area);
      var viewStoryName = (new URL(document.location)).searchParams.get('story');
      if(viewStoryName)ajaxLoader.loadStoryJson(viewStoryName+'.json');
      else ajaxLoader.loadPage('ストーリー選択.html');
    </script>
    </div></div>
  </body>
</html>
